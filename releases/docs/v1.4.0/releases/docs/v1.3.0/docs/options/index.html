<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Meta, title, CSS, favicons, etc. -->
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="description" content="">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>
  
    Options &middot; KLEE
  
</title>

<!-- Add to homescreen for Chrome on Android -->
<meta name="mobile-web-app-capable" content="yes">
<link rel="icon" sizes="192x192" href="/releases/docs/v1.3.0/images/touch/chrome-touch-icon-192x192.png">

<!-- Add to homescreen for Safari on iOS -->
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">
<meta name="apple-mobile-web-app-title" content="Web Starter Kit">
<link rel="apple-touch-icon-precomposed" href="/releases/docs/v1.3.0/images/touch/apple-touch-icon-precomposed.png">

<!-- Tile icon for Win8 (144x144 + tile color) -->
<meta name="msapplication-TileImage" content="/releases/docs/v1.3.0/images/touch/ms-touch-icon-144x144-precomposed.png">
<meta name="msapplication-TileColor" content="#3372DF">

<!-- Page styles -->
<link rel="stylesheet" href="/releases/docs/v1.3.0/css/main.css">
<link rel="stylesheet" href="/releases/docs/v1.3.0/css/pygments/default.css">

<!-- Fonts -->
<link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:200,300,400,400italic,600,700,900" rel="stylesheet" type="text/css">
<link href="https://fonts.googleapis.com/css?family=Source+Code+Pro:400,500,600,700" rel="stylesheet" type="text/css">

  </head>
  <body>
    <!-- master nav -->
    <header class="app-bar promote-layer">
  <div class="app-bar-container">
    <button class="menu"><img src="/releases/docs/v1.3.0/images/hamburger.svg" alt="Menu"></button>
    <h1 class="logo">
      <a href="/releases/docs/v1.3.0/">
        <img alt="KLEE" src="/releases/docs/v1.3.0/images/klee.svg">
      </a>
    </h1>
    <section class="app-bar-actions">
    <!-- Put App Bar Buttons Here -->
    <!-- e.g <button><i class="icon icon-star"></i></button> -->
    </section>
  </div>
</header>

<nav class="navdrawer-container promote-layer" role="navigation">
  <h4>Navigation</h3>
  <ul>
    <li>
      <a href="/releases/docs/v1.3.0/getting-started">Getting Started</a>
    </li>
    <li>
      <a href="/releases/docs/v1.3.0/docs">Documentation</a>
    </li>
    <li>
      <a href="/releases/docs/v1.3.0/tutorials">Tutorials</a>
    </li>
    <li>
      <a href="/releases/docs/v1.3.0/publications">Publications</a>
    </li>
    <li>
      <a href="/releases/docs/v1.3.0/projects">Projects</a>
    </li>
    <li>
      <a href="/releases/docs/v1.3.0/getting-involved">Getting Involved</a>
    </li>
    
    
    
  </ul>
</nav>

    
<a href="https://github.com/klee/klee/releases/tag/v1.3.0">
<div id="version_ribbon" class="cr cr-top cr-right cr-sticky">
  Version 1.3.0
</div>
</a>


    <!-- page layout -->
    <main>
      <div class="editorial-header">
        <h1 class="tag editorial-header__title">Options</h1>
        <h2 class="editorial-header__subtitle">Overview of KLEE’s main command-line options</h2>
        <p class="editorial-header__excerpt g-wide--pull-1"></p>
      </div>

      <p class="toc toc__title no_toc">Contents</p>
<ul class="toc__list list-anchor" id="markdown-toc">
  <li><a href="#klee-usage" id="markdown-toc-klee-usage">KLEE usage</a></li>
  <li><a href="#symbolic-environment" id="markdown-toc-symbolic-environment">Symbolic Environment</a></li>
  <li><a href="#search-heuristics" id="markdown-toc-search-heuristics">Search Heuristics</a></li>
  <li><a href="#query-logging" id="markdown-toc-query-logging">Query Logging</a></li>
  <li><a href="#entry-point" id="markdown-toc-entry-point">Entry Point</a></li>
  <li><a href="#calls-to-klee-assume" id="markdown-toc-calls-to-klee-assume">Calls to <code class="highlighter-rouge">klee-assume</code></a></li>
  <li><a href="#statistics" id="markdown-toc-statistics">Statistics</a></li>
  <li><a href="#klee-debug" id="markdown-toc-klee-debug">KLEE debug</a></li>
  <li><a href="#memory-management" id="markdown-toc-memory-management">Memory Management</a></li>
  <li><a href="#making-klee-exit-on-events" id="markdown-toc-making-klee-exit-on-events">Making KLEE Exit on Events</a></li>
</ul>

<h2 id="klee-usage">KLEE usage</h2>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="gp">$ </span>klee <span class="o">[</span>klee-options] &lt;program.bc&gt; <span class="o">[</span>program-options]</code></pre></figure>

<p>The general form of a KLEE command-line is first the arguments for KLEE itself (<code class="highlighter-rouge">[klee-options]</code>), then the LLVM bitcode file to execute (<code class="highlighter-rouge">program.bc</code>), and then any arguments to pass to the application (<code class="highlighter-rouge">[program-options]</code>).
In particular, the KLEE option <code class="highlighter-rouge">-posix-runtime</code> enables the use of the symbolic environment options as part of the program’s options.</p>

<p>To get a complete list of KLEE’s command-line options run: <code class="highlighter-rouge">klee --help</code>. The remainder of this page illustrate KLEE’s main command-line options.</p>

<h2 id="symbolic-environment">Symbolic Environment</h2>

<p>KLEE provides several options as part of its symbolic environment:</p>

<ol>
  <li><code class="highlighter-rouge">-sym-arg &lt;N&gt;</code> - Replace by a symbolic argument with length N.</li>
  <li><code class="highlighter-rouge">-sym-args &lt;MIN&gt; &lt;MAX&gt; &lt;N&gt;</code> - Replace by at least MIN arguments and at most MAX arguments, each with maximum length N.</li>
  <li><code class="highlighter-rouge">-sym-files &lt;NUM&gt; &lt;N&gt;</code> - Make NUM symbolic files (‘A’, ‘B’, ‘C’, etc.), each with size N (excluding stdin)</li>
  <li><code class="highlighter-rouge">-sym-stdin &lt;N&gt;</code> - Make stdin symbolic with size N.</li>
  <li><code class="highlighter-rouge">-sym-stdout</code> - Make stdout symbolic.</li>
  <li><code class="highlighter-rouge">-save-all-writes</code> - Allow write operations to execute as expected even if they exceed the file size (<em>default=on</em>). When <em>off</em>, all writes exceeding the initial file size are discarded. <strong>Note:</strong> file offset is <em>always</em> incremented.</li>
  <li><code class="highlighter-rouge">-max-fail &lt;N&gt;</code> - Allow up to N injected failures.</li>
  <li><code class="highlighter-rouge">-fd-fail</code> - Shortcut for ‘-max-fail 1’.</li>
</ol>

<p>Some usage examples:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="gp">$ </span>klee -posix-runtime &lt;program.bc&gt; -sym-arg 16</code></pre></figure>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="gp">$ </span>klee -posix-runtime &lt;program.bc&gt; -sym-files 2 30 -sym-stdin</code></pre></figure>

<h2 id="search-heuristics">Search Heuristics</h2>

<h3 id="main-search-heuristics">Main search heuristics</h3>

<p>KLEE provides four main search heuristics:</p>

<ol>
  <li><strong>Depth-First Search (DFS):</strong> Traverses states in depth-first order.</li>
  <li><strong>Random State Search:</strong>Randomly selects a state to explore.</li>
  <li><strong>Random Path Selection:</strong> Described in our <a href="http://www.doc.ic.ac.uk/~cristic/papers/klee-osdi-08.pdf">KLEE OSDI’08</a> paper.</li>
  <li><strong>Non Uniform Random Search (NURS):</strong> Selects a state randomly according to a given distribution. The distribution can be based on the minimum distance to an uncovered instruction (MD2U), the query cost, etc.</li>
</ol>

<p>To select a search heuristic, use the <code class="highlighter-rouge">--search</code> option provided by KLEE. For example:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="gp">$ </span>klee --search<span class="o">=</span>dfs demo.o</code></pre></figure>

<p>runs <code class="highlighter-rouge">demo.o</code> using DFS, while</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="gp">$ </span>klee --search<span class="o">=</span>random-path demo.o</code></pre></figure>

<p>runs it using the random path selection strategy. The full list of options is shown in KLEE’s help message:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="gp">$ </span>klee --help
-search - Specify the search heuristic <span class="o">(</span><span class="nv">default</span><span class="o">=</span>random-path interleaved with nurs:covnew<span class="o">)</span>
  <span class="o">=</span>dfs - use Depth First Search <span class="o">(</span>DFS<span class="o">)</span>
  <span class="o">=</span>random-state - randomly <span class="k">select </span>a state to explore
  <span class="o">=</span>random-path - use Random Path Selection <span class="o">(</span>see OSDI<span class="s1">'08 paper)
  =nurs:covnew - use Non Uniform Random Search (NURS) with Coverage-New heuristic
  =nurs:md2u - use NURS with Min-Dist-to-Uncovered heuristic
  =nurs:depth - use NURS with 2^depth heuristic
  =nurs:icnt - use NURS with Instr-Count heuristic
  =nurs:cpicnt - use NURS with CallPath-Instr-Count heuristic
  =nurs:qc - use NURS with Query-Cost heuristic</span></code></pre></figure>

<h3 id="interleaving-search-heuristics">Interleaving search heuristics</h3>

<p>Search heuristics in KLEE can be interleaved in a round-robin fashion. To interleave several search heuristics to be interleaved, use the <code class="highlighter-rouge">--search</code> multiple times. For example:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="gp">$ </span>klee --search<span class="o">=</span>random-state --search<span class="o">=</span>nurs:md2u demo.o</code></pre></figure>

<p>interleaves the Random State and the NURS:MD2U heuristics in a round robin fashion.</p>

<h3 id="default-search-heuristics">Default search heuristics</h3>

<p>The default heuristics used by KLEE are <code class="highlighter-rouge">random-path</code> interleaved with <code class="highlighter-rouge">nurs:covnew</code>.</p>

<h2 id="query-logging">Query Logging</h2>

<p>To log the queries issued by KLEE during symbolic execution, you can use the following options:</p>

<ol>
  <li><code class="highlighter-rouge">--use-query-log=TYPE:FORMAT</code>, where:
    <ul>
      <li><strong>TYPE</strong> is either <strong>all</strong> to log all the queries KLEE made during execution before any optimisation (e.g. caching, constraint independence) is performed, or <strong>solver</strong> to log only the queries passed to KLEE’s underlying solver. Note that it is possible that some of the unoptimized queries are never executed or are modified before being executed by KLEE’s underlying solver.</li>
      <li><strong>FORMAT</strong> is the format in which queries are logged and can be either <strong>pc</strong> for the <a href="/releases/docs/v1.3.0/docs/kquery">KQuery</a> format, or <strong>smt2</strong> for the <a href="http://www.smtlib.org">SMT-LIBv2</a> format.</li>
    </ul>
  </li>
  <li><code class="highlighter-rouge">--min-query-time-to-log=TIME</code> (in ms) is used to log only queries that exceed a certain time limit. <strong>TIME</strong> can be:
    <ul>
      <li><strong>0</strong> (default): to log all queries</li>
      <li><strong>&lt;0</strong>: a negative value specifies that only queries that timed out should be logged. The timeout value is specified via the <code class="highlighter-rouge">--max-solver-time</code> option.</li>
      <li><strong>&gt;0</strong>: only queries that took more that <strong>TIME</strong> milliseconds should be logged.</li>
    </ul>
  </li>
  <li><code class="highlighter-rouge">--log-partial-queries-early=true</code> is used to dump the query to the log file before the next part of the solver chain is called.  Normally, KLEE prints the query and its solution after it has been solved. But if KLEE crashes inside the solver chain, the suspicious query will not be logged. Enable this option to debug such cases. This option comes with a performance penalty as the log buffer gets always flushed.</li>
  <li><code class="highlighter-rouge">--compress-query-log</code> is used to compress query log files (<strong>default=off</strong>)</li>
</ol>

<h2 id="entry-point">Entry Point</h2>

<p>To change the entry point you can use the option <code class="highlighter-rouge">-entry-point=FUNCTION_NAME</code>, where <strong>FUNCTION_NAME</strong> is the name of the function to use as the entry point for execution.</p>

<h2 id="calls-to-klee-assume">Calls to <code class="highlighter-rouge">klee-assume</code></h2>

<p>By default, KLEE will report an error if the assumed condition is infeasible. The option <code class="highlighter-rouge">-silent-klee-assume</code> can be used to sliently terminate the current path exploration in such cases.</p>

<h2 id="statistics">Statistics</h2>

<p>By default, KLEE generates two files containing statistics concerning the code exploration:</p>

<ul>
  <li><strong>run.stats</strong>: This is a text file containing various statistics emitted by KLEE. While this file can be inspected manually, you should use the <a href="/releases/docs/v1.3.0/docs/tools">klee-stats</a> tool for that.</li>
  <li><strong>run.istats</strong>: This is a text file in Callgrind format containing global statistics emitted by KLEE for each line of code in the program. This file can be inspected with frontends which are able to read it (e.g. <a href="https://kcachegrind.github.io/">kcachegrind</a>)</li>
</ul>

<p>There are several options to modify how KLEE outputs statistics:</p>

<ul>
  <li><code class="highlighter-rouge">-stats</code>                             - Enable statistics output from program (<em>default=on</em>)</li>
  <li><code class="highlighter-rouge">-output-stats</code>                      - Write running stats trace file (<em>default=on</em>)</li>
  <li><code class="highlighter-rouge">-output-istats</code>                     - Write instruction level statistics in callgrind format (<em>default=on</em>)</li>
  <li><code class="highlighter-rouge">-stats-write-interval=TIME</code>         - Approximate number of seconds between stats writes (<em>default=1.0s</em>)</li>
  <li><code class="highlighter-rouge">-istats-write-interval=TIME</code>        - Approximate number of seconds between istats writes (<em>default=10.0s</em>)</li>
  <li><code class="highlighter-rouge">-stats-write-after-instructions=N</code>  - Write statistics after each <code class="highlighter-rouge">N</code> instructions, 0 to disable (<em>default=0</em>)</li>
  <li><code class="highlighter-rouge">-istats-write-after-instructions=N</code> - Write istats after each <code class="highlighter-rouge">N</code> instructions, 0 to disable (<em>default=0</em>)</li>
</ul>

<h2 id="klee-debug">KLEE debug</h2>

<p>KLEE provides several debugging options:</p>

<ul>
  <li>
    <p><code class="highlighter-rouge">-debug-print-instructions=FORMAT</code>     - Log the LLVM instructions executed by KLEE (<strong>default=off</strong>).</p>

    <p>The output may include: the source code file and line (<code class="highlighter-rouge">src</code>), the instruction identifier as assigned by KLEE (<code class="highlighter-rouge">inst_id</code>), and the LLVM instruction with debugging informations (<code class="highlighter-rouge">llvm_inst</code>). The output format can be controlled with the following options:</p>

    <ul>
      <li><code class="highlighter-rouge">=all:stderr</code>     - Log all instructions to stderr in format <code class="highlighter-rouge">[src, inst_id, llvm_inst]</code></li>
      <li><code class="highlighter-rouge">=src:stderr</code>     - Log all instructions to stderr in format <code class="highlighter-rouge">[src, inst_id]</code></li>
      <li><code class="highlighter-rouge">=compact:stderr</code> - Log all instructions to stderr in format <code class="highlighter-rouge">[inst_id]</code></li>
      <li><code class="highlighter-rouge">=all:file</code>       - Log all instructions to file instructions.txt in format <code class="highlighter-rouge">[src, inst_id, llvm_inst]</code></li>
      <li><code class="highlighter-rouge">=src:file</code>       - Log all instructions to file instructions.txt in format <code class="highlighter-rouge">[src, inst_id]</code></li>
      <li><code class="highlighter-rouge">=compact:file</code>   - Log all instructions to file instructions.txt in format <code class="highlighter-rouge">[inst_id]</code></li>
    </ul>
  </li>
  <li>
    <p><code class="highlighter-rouge">-debug-compress-instructions</code>  - Compress the <code class="highlighter-rouge">instructions.txt</code> file (<strong>default=off</strong>)</p>
  </li>
</ul>

<h2 id="memory-management">Memory Management</h2>

<p>KLEE explicitly intercepts calls for memory management (like <code class="highlighter-rouge">malloc()</code> and <code class="highlighter-rouge">free()</code>) and forwards to an existing memory allocators.
To change this behaviour, following options are provided:</p>

<ul>
  <li><code class="highlighter-rouge">--allocate-determ</code>                  - Enable support to allocate memory deterministically for the executed application (<em>default=off</em>)</li>
  <li><code class="highlighter-rouge">--allocate-determ-size</code>             - For deterministic allocation, the buffer of the specified size is pre-allocated in MB (<em>default=100</em>)</li>
  <li><code class="highlighter-rouge">--allocate-determ-start-addres</code>     - Controls the required start address of the pre-allocated memory. This address has to be page aligned. If null is provided, the memory is mapped to an arbitrary address.</li>
  <li><code class="highlighter-rouge">--return-null-on-zero-malloc</code>       - Controls if a NULL pointer should be returned in case the size argument is zero (<em>default=off</em>)</li>
  <li><code class="highlighter-rouge">--red-zone-space</code>                   - Controls the space kept unused between two adjacent allocations in byte (<em>default=10</em>)</li>
</ul>

<h2 id="making-klee-exit-on-events">Making KLEE Exit on Events</h2>

<p>KLEE does not exit if a bug is found in the analyzed application by default. On
the other hand, KLEE implicitly exits on some failures. This behaviour can be
changed by the following options:</p>

<ul>
  <li><code class="highlighter-rouge">-exit-on-error</code>                     - Exit on the first arbitrary error.</li>
  <li><code class="highlighter-rouge">-exit-on-error-type=TYPE</code>           - Exit on the first error of type <code class="highlighter-rouge">TYPE</code>. This parameter can be repeated to exit after more types. <code class="highlighter-rouge">TYPE</code> can one of the following:
    <ul>
      <li><code class="highlighter-rouge">=Abort</code>       - The program crashed</li>
      <li><code class="highlighter-rouge">=Assert</code>      - An assertion was hit</li>
      <li><code class="highlighter-rouge">=Exec</code>        - Trying to execute an unexpected instruction</li>
      <li><code class="highlighter-rouge">=External</code>    - External objects referenced</li>
      <li><code class="highlighter-rouge">=Free</code>        - Freeing invalid memory</li>
      <li><code class="highlighter-rouge">=Model</code>       - Memory model limit hit</li>
      <li><code class="highlighter-rouge">=Overflow</code>    - An overflow occurred</li>
      <li><code class="highlighter-rouge">=Ptr</code>         - Pointer error</li>
      <li><code class="highlighter-rouge">=ReadOnly</code>    - Write to read-only memory</li>
      <li><code class="highlighter-rouge">=ReportError</code> - <code class="highlighter-rouge">klee_report_error</code> called</li>
      <li><code class="highlighter-rouge">=User</code>        - Wrong <code class="highlighter-rouge">klee_*</code> functions invocation</li>
      <li><code class="highlighter-rouge">=Unhandled</code>   - Unhandled instruction hit</li>
    </ul>
  </li>
  <li><code class="highlighter-rouge">-ignore-solver-failures</code>            - Do not exit upon solver failure.</li>
</ul>

<p>Examples:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">klee -exit-on-error input.bc</code></pre></figure>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">klee -exit-on-error-type<span class="o">=</span>Assert -exit-on-error-type<span class="o">=</span>Ptr input.bc</code></pre></figure>


    </main>

    <footer class="main-footer">
  <div class="main-footer__container container clear">
    <div class="main-footer__list-group">
      <ul class="main-footer__list main-footer__list--primary">
        <li class="sitemap__item sitemap__item--web sitemap__item--home">
          <strong>Resources</strong>
        </li>
        <li class="sitemap__item sitemap__item--klee-dev">
          <a class="sitemap--list__link sitemap--list__link--parent"href="/releases/docs/v1.3.0/klee-dev/">Mailing List</a>
        </li>
        <li class="sitemap__item sitemap__item--doxygen">
          <a class="sitemap--list__link sitemap--list__link--parent"href="http://www.doc.ic.ac.uk/~dsl11/klee-doxygen/">Doxygen</a>
        </li>
        <li class="sitemap__item sitemap__item--github">
          <a class="sitemap--list__link sitemap--list__link--parent"href="https://github.com/klee">GitHub</a>
        </li>
        <li class="sitemap__item sitemap__item--buildbot">
          <a class="sitemap--list__link sitemap--list__link--parent"href="https://travis-ci.org/klee/klee/branches">TravisCI</a>
        </li>
      </ul>
      <div class="main-footer__klee-section">
        <p style="text-align: center">

Documentation for KLEE v1.3.0

        </p>
        <p>&copy; Copyright 2009-2016, The KLEE Team.</p>
      </div>
    </div>
  </div>
</footer>
<!-- build:js scripts/main.min.js -->
<script src="/releases/docs/v1.3.0/js/main.js"></script>
<!-- endbuild -->

<!-- Google Analytics -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-XXXXX-X', 'auto');
  ga('send', 'pageview');
</script>

  </body>
</html>
